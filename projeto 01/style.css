/* =========================================================
   Finanças - Organizador de Dívidas (PRO UI)
   - Mobile-First
   - :root variables
   - BEM
   - A11y + performance
   ========================================================= */

:root {
  /* Base */
  --bg: #0b1220;
  --surface: #0f1a2e;
  --surface-2: #101f3a;
  --surface-3: #0c1628;
  --text: #eaf0ff;
  --muted: rgba(234, 240, 255, 0.72);
  --muted-2: rgba(234, 240, 255, 0.52);
  --border: rgba(255, 255, 255, 0.10);

  /* Brand */
  --primary: #2ee59d;
  --primary-2: #1dd18a;
  --danger: #ff4d4d;
  --warning: #ffb020;

  /* Shadows & radius */
  --radius: 16px;
  --radius-sm: 12px;
  --shadow-1: 0 10px 26px rgba(0, 0, 0, 0.35);
  --shadow-2: 0 14px 34px rgba(0, 0, 0, 0.45);

  /* Layout */
  --container: 1120px;

  /* Type scale */
  --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
  --h1: clamp(1.6rem, 3.3vw, 2.25rem);
  --h2: clamp(1.25rem, 2.2vw, 1.6rem);
  --h3: 1.05rem;
  --p: 0.98rem;
  --small: 0.86rem;

  /* Spacing */
  --s1: 0.35rem;
  --s2: 0.6rem;
  --s3: 0.85rem;
  --s4: 1.1rem;
  --s5: 1.4rem;
  --s6: 1.8rem;
  --s7: 2.4rem;
  --s8: 3.1rem;

  /* A11y */
  --focus: 0 0 0 3px rgba(46, 229, 157, 0.35);

  /* Motion */
  --ease: cubic-bezier(.2,.8,.2,1);
  --t: 160ms var(--ease);
}

/* Light mode (auto) */
@media (prefers-color-scheme: light) {
  :root {
    --bg: #f6f8ff;
    --surface: #ffffff;
    --surface-2: #f1f5ff;
    --surface-3: #eef2ff;
    --text: #0b1220;
    --muted: rgba(11, 18, 32, 0.70);
    --muted-2: rgba(11, 18, 32, 0.52);
    --border: rgba(11, 18, 32, 0.12);
    --shadow-1: 0 12px 28px rgba(11, 18, 32, 0.10);
    --shadow-2: 0 16px 34px rgba(11, 18, 32, 0.12);
  }
}

/* ===== Reset ===== */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html:focus-within {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  font-family: var(--font);
  color: var(--text);
  background:
    radial-gradient(1200px 800px at 10% 0%, rgba(46, 229, 157, 0.12), transparent 55%),
    radial-gradient(1000px 650px at 100% 10%, rgba(255, 176, 32, 0.10), transparent 55%),
    var(--bg);
  line-height: 1.55;
  text-rendering: optimizeLegibility;
}

a {
  color: inherit;
}

img {
  max-width: 100%;
  display: block;
}

/* ===== Utilities ===== */
.visually-hidden {
  position: absolute !important;
  height: 1px; width: 1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap;
}

.skip-link {
  position: absolute;
  left: -999px;
  top: var(--s3);
  padding: var(--s2) var(--s3);
  border-radius: 999px;
  background: var(--surface);
  border: 1px solid var(--border);
  z-index: 9999;
}

.skip-link:focus {
  left: var(--s3);
  outline: none;
  box-shadow: var(--focus);
}

/* Containers */
.app-header__container,
.section__container,
.hero__container,
.app-footer__container {
  width: min(100% - 2rem, var(--container));
  margin-inline: auto;
}

/* ===== Header ===== */
.app-header {
  position: sticky;
  top: 0;
  z-index: 50;
  background: color-mix(in srgb, var(--bg) 78%, transparent);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--border);
}

.app-header__container {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--s4);
  padding: var(--s3) 0;
}

.brand {
  display: flex;
  align-items: center;
  gap: var(--s3);
  min-width: 0;
}

.brand__mark {
  width: 44px;
  height: 44px;
  border-radius: 14px;
  display: grid;
  place-items: center;
  font-weight: 900;
  background: linear-gradient(135deg, rgba(46, 229, 157, 0.26), rgba(46, 229, 157, 0.10));
  border: 1px solid var(--border);
  box-shadow: var(--shadow-1);
}

.brand__text {
  display: grid;
  gap: 0.12rem;
}

.brand__name {
  margin: 0;
  font-size: 1rem;
  font-weight: 900;
  letter-spacing: 0.2px;
  line-height: 1.1;
}

.brand__tagline {
  margin: 0;
  font-size: var(--small);
  color: var(--muted);
}

/* Nav */
.app-nav__list {
  list-style: none;
  display: flex;
  align-items: center;
  gap: var(--s2);
  padding: 0;
  margin: 0;
  flex-wrap: wrap;
}

.app-nav__link {
  text-decoration: none;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--surface) 82%, transparent);
  padding: 0.55rem 0.85rem;
  border-radius: 999px;
  font-weight: 800;
  font-size: 0.86rem;
  color: var(--text);
  transition: transform var(--t), border-color var(--t), background var(--t);
}

.app-nav__link:hover {
  border-color: color-mix(in srgb, var(--primary) 35%, var(--border));
  transform: translateY(-1px);
}

.app-nav__link:focus-visible {
  outline: none;
  box-shadow: var(--focus);
}

/* ===== Hero ===== */
.hero {
  padding: var(--s7) 0 var(--s6);
}

.hero__container {
  display: grid;
  gap: var(--s4);
}

.hero__title {
  margin: 0;
  font-size: var(--h1);
  line-height: 1.12;
  letter-spacing: -0.3px;
}

.hero__subtitle {
  margin: 0;
  max-width: 64ch;
  color: var(--muted);
  font-size: var(--p);
}

.hero__note {
  border: 1px solid var(--border);
  background: linear-gradient(
    135deg,
    color-mix(in srgb, var(--surface) 92%, transparent),
    color-mix(in srgb, var(--surface-2) 88%, transparent)
  );
  border-radius: var(--radius);
  padding: var(--s4);
  box-shadow: var(--shadow-1);
}

.hero__note-text {
  margin: 0;
  color: var(--muted);
  font-size: var(--small);
}

.hero__actions {
  display: flex;
  gap: var(--s3);
  flex-wrap: wrap;
}

/* ===== Sections ===== */
.section {
  padding: var(--s6) 0;
}

.section__header {
  margin-bottom: var(--s4);
  display: grid;
  gap: var(--s1);
}

.section__header--row {
  display: grid;
  gap: var(--s3);
}

.section__title {
  margin: 0;
  font-size: var(--h2);
  letter-spacing: -0.2px;
}

.section__desc {
  margin: 0;
  color: var(--muted);
  font-size: var(--p);
}

/* ===== Cards ===== */
.grid--cards {
  display: grid;
  gap: var(--s3);
}

.card {
  border: 1px solid var(--border);
  background: linear-gradient(
    135deg,
    color-mix(in srgb, var(--surface) 92%, transparent),
    color-mix(in srgb, var(--surface-2) 88%, transparent)
  );
  border-radius: var(--radius);
  box-shadow: var(--shadow-1);
  padding: var(--s4);
}

.card--stat {
  position: relative;
  overflow: hidden;
}

.card--stat::before {
  content: "";
  position: absolute;
  inset: -40% -40% auto auto;
  width: 220px;
  height: 220px;
  background: radial-gradient(circle at 30% 30%, rgba(46, 229, 157, 0.22), transparent 65%);
  transform: rotate(20deg);
  pointer-events: none;
}

.card__title {
  margin: 0 0 var(--s2);
  color: var(--muted);
  font-weight: 900;
  font-size: 0.9rem;
}

.card__value {
  margin: 0 0 var(--s1);
  font-weight: 950;
  font-size: 1.55rem;
  letter-spacing: -0.2px;
}

.card__meta {
  margin: 0;
  color: var(--muted-2);
  font-size: var(--small);
}

/* ===== Buttons ===== */
.btn {
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text);
  border-radius: 999px;
  padding: 0.78rem 1rem;
  font-weight: 900;
  font-size: 0.92rem;
  cursor: pointer;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.45rem;
  transition: transform var(--t), background var(--t), border-color var(--t), filter var(--t);
  user-select: none;
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--focus);
}

.btn:hover {
  transform: translateY(-1px);
}

.btn--primary {
  border-color: color-mix(in srgb, var(--primary) 45%, var(--border));
  background: linear-gradient(135deg, var(--primary), var(--primary-2));
  color: #06150f;
}

.btn--ghost {
  background: color-mix(in srgb, var(--surface) 82%, transparent);
}

.btn--danger {
  border-color: color-mix(in srgb, var(--danger) 45%, var(--border));
  background: color-mix(in srgb, var(--danger) 12%, transparent);
}

.btn--small {
  padding: 0.58rem 0.85rem;
  font-size: 0.84rem;
}

/* ===== Form ===== */
.debt-form {
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: linear-gradient(
    135deg,
    color-mix(in srgb, var(--surface) 92%, transparent),
    color-mix(in srgb, var(--surface-2) 88%, transparent)
  );
  box-shadow: var(--shadow-1);
  padding: var(--s4);
}

.debt-form__grid {
  display: grid;
  gap: var(--s3);
}

.debt-form__actions {
  margin-top: var(--s4);
  display: flex;
  gap: var(--s3);
  flex-wrap: wrap;
}

/* Fields */
.field__label {
  display: block;
  margin-bottom: var(--s1);
  font-weight: 900;
  font-size: 0.9rem;
  color: var(--muted);
}

.field__input {
  width: 100%;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 0.9rem 0.95rem;
  background: color-mix(in srgb, var(--surface-3) 86%, transparent);
  color: var(--text);
  font-size: 0.98rem;
  transition: border-color var(--t), box-shadow var(--t), background var(--t);
}

.field__input::placeholder {
  color: var(--muted-2);
}

.field__input:focus-visible {
  outline: none;
  box-shadow: var(--focus);
  border-color: color-mix(in srgb, var(--primary) 55%, var(--border));
  background: color-mix(in srgb, var(--surface-3) 92%, transparent);
}

.field__input--textarea {
  resize: vertical;
  min-height: 108px;
}

.field__hint {
  margin: var(--s1) 0 0;
  color: var(--muted-2);
  font-size: var(--small);
}

.field__error {
  margin: var(--s1) 0 0;
  color: var(--danger);
  font-size: var(--small);
  min-height: 1.1em;
}

.field--full {
  grid-column: 1 / -1;
}

.field--inline {
  min-width: 0;
}

/* Filters */
.filters {
  display: grid;
  gap: var(--s3);
  margin-bottom: var(--s4);
}

/* ===== List ===== */
.list__grid {
  display: grid;
  gap: var(--s3);
}

.debt {
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: linear-gradient(
    135deg,
    color-mix(in srgb, var(--surface) 92%, transparent),
    color-mix(in srgb, var(--surface-2) 88%, transparent)
  );
  box-shadow: var(--shadow-1);
  padding: var(--s4);
  transition: transform var(--t), box-shadow var(--t), border-color var(--t);
}

.debt:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-2);
  border-color: color-mix(in srgb, var(--primary) 18%, var(--border));
}

.debt__top {
  display: grid;
  gap: var(--s2);
}

.debt__title {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 950;
  letter-spacing: -0.15px;
}

.debt__badges {
  display: flex;
  gap: var(--s2);
  flex-wrap: wrap;
}

.badge {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 0.26rem 0.62rem;
  font-size: 0.8rem;
  color: var(--muted);
  background: color-mix(in srgb, var(--surface-3) 82%, transparent);
}

.badge--open {
  border-color: color-mix(in srgb, var(--warning) 45%, var(--border));
}

.badge--paid {
  border-color: color-mix(in srgb, var(--primary) 45%, var(--border));
}

.debt__meta {
  display: grid;
  gap: var(--s1);
  margin-top: var(--s3);
  color: var(--muted);
  font-size: 0.93rem;
}

.debt__amount {
  color: var(--text);
  font-weight: 950;
  font-size: 1.15rem;
}

/* Actions */
.debt__actions {
  display: flex;
  gap: var(--s2);
  flex-wrap: wrap;
  margin-top: var(--s4);
}

.link-btn {
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 0.58rem 0.85rem;
  background: color-mix(in srgb, var(--surface-3) 70%, transparent);
  color: var(--text);
  cursor: pointer;
  font-weight: 900;
  font-size: 0.85rem;
  transition: transform var(--t), border-color var(--t), background var(--t);
}

.link-btn:hover {
  transform: translateY(-1px);
  border-color: color-mix(in srgb, var(--primary) 35%, var(--border));
}

.link-btn:focus-visible {
  outline: none;
  box-shadow: var(--focus);
}

.link-btn--danger {
  border-color: color-mix(in srgb, var(--danger) 45%, var(--border));
  background: color-mix(in srgb, var(--danger) 10%, transparent);
}

/* Empty state */
.empty-state {
  margin: 0;
  padding: var(--s4);
  border: 1px dashed var(--border);
  border-radius: var(--radius);
  color: var(--muted);
}

/* Tools */
.tools {
  display: flex;
  gap: var(--s2);
  flex-wrap: wrap;
  align-items: center;
}

.tools__file {
  position: relative;
  overflow: hidden;
}

.tools__file-input {
  position: absolute;
  inset: 0;
  opacity: 0;
  cursor: pointer;
}

/* ===== Toast (notification) ===== */
.toast {
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  width: min(92vw, 520px);
  padding: 0.9rem 1rem;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--surface) 88%, transparent);
  box-shadow: var(--shadow-2);
  color: var(--text);
  font-weight: 900;
  font-size: 0.92rem;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--t), transform var(--t);
}

/* Classe aplicada via JS quando mostrar toast */
.toast--show {
  opacity: 1;
  transform: translateX(-50%) translateY(-2px);
}

/* ===== Footer ===== */
.app-footer {
  border-top: 1px solid var(--border);
  padding: var(--s5) 0;
}

.app-footer__text {
  margin: 0;
  color: var(--muted);
  font-size: 0.9rem;
}

/* ===== Modal ===== */
.modal {
  border: none;
  padding: 0;
  border-radius: var(--radius);
  width: min(92vw, 560px);
  background: var(--surface);
  color: var(--text);
  box-shadow: var(--shadow-2);
}

.modal::backdrop {
  background: rgba(0, 0, 0, 0.62);
}

.modal__content {
  padding: var(--s4);
}

.modal__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--s3);
  margin-bottom: var(--s3);
}

.modal__title {
  margin: 0;
  font-size: var(--h2);
  letter-spacing: -0.2px;
}

.modal__close {
  width: 42px;
  height: 42px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--surface-3) 75%, transparent);
  color: var(--text);
  font-size: 1.25rem;
  cursor: pointer;
}

.modal__close:focus-visible {
  outline: none;
  box-shadow: var(--focus);
}

.modal__footer {
  display: flex;
  gap: var(--s3);
  flex-wrap: wrap;
  margin-top: var(--s4);
}

/* ===== Responsive (>= 720px) ===== */
@media (min-width: 45rem) {
  .grid--cards {
    grid-template-columns: repeat(3, 1fr);
  }

  .debt-form__grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .filters {
    grid-template-columns: 1.4fr 1fr 1fr;
    align-items: end;
  }

  .list__grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .section__header--row {
    grid-template-columns: 1fr auto;
    align-items: end;
  }
}

/* A11y motion */
@media (prefers-reduced-motion: reduce) {
  html:focus-within { scroll-behavior: auto; }
  * { transition: none !important; }
}